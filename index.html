<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Form</title>

    <link rel="stylesheet" href="style.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/23.0.10/css/intlTelInput.css" integrity="sha512-qc5ao9G+o/Nn7o+7uM+13N08g+lFbO+2/Zt+wCLl3/122u7IqIS7+7c55eN1f0LwAgF1LhIDfYvL5X3+FpV/xw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js@9.0.1/public/assets/styles/choices.min.css"/>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/7.2.1/css/flag-icons.min.css" integrity="sha512-cjqYBiqGqLWEhxfDMJUzoYfs6LGBGlIWwYgdGcjQoCbM/dcZEqnhj7eJgRhkD8dxLNs+wLfREOeqAjvRvsanxw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
      /* Ensure intl-tel-input container takes full width */
      .iti { width: 100%; }
      /* Custom styles for Choices.js dropdown with flags */
      .choices__item--choice .fi {
          margin-right: 8px; /* Space between flag and text */
          vertical-align: middle;
          /* Optional: Set a fixed width/height if flags vary */
          /* width: 1.33em;
          height: 1em;
          background-size: contain;
          background-repeat: no-repeat;
          background-position: center; */
      }
       /* Style for mandatory terms label */
      .terms-label { font-weight: normal; display: inline; }
      .terms-label a { color: #007bff; text-decoration: none;}
      .terms-label a:hover { text-decoration: underline;}
      .mandatory-star { color: red; margin-left: 3px;}
    </style>

</head>
<body>

    <h1>Create Your Account</h1>
    <p>Please fill in all fields accurately.</p>

    <form id="contact-form" action="https://formspree.io/f/YOUR_FORM_ID" method="POST">

        <div class="form-group">
            <label for="first_name">First Name:<span class="mandatory-star">*</span></label>
            <input type="text" id="first_name" name="first_name" required>
        </div>

        <div class="form-group">
            <label for="surname">Surname:<span class="mandatory-star">*</span></label>
            <input type="text" id="surname" name="surname" required>
        </div>

        <div class="form-group">
             <fieldset>
                <legend>Do you have any experience?<span class="mandatory-star">*</span></legend>
                <label>
                    <input type="radio" name="experience" value="yes" required> Yes
                </label>
                <label>
                    <input type="radio" name="experience" value="no" required> No
                </label>
            </fieldset>
        </div>

         <div class="form-group">
            <label for="gender">Gender:<span class="mandatory-star">*</span></label>
            <select id="gender" name="gender" required>
                <option value="">--Please select--</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
                <option value="other">Other</option>
                <option value="prefer_not_to_say">Prefer not to say</option>
            </select>
        </div>

        <div class="form-group">
            <label for="email">Email Address:<span class="mandatory-star">*</span></label>
            <input type="email" id="email" name="_replyto" required>
        </div>

        <div class="form-group">
            <label for="phone">Phone Number:<span class="mandatory-star">*</span></label>
            <input type="tel" id="phone" name="phone" required>
        </div>

         <div class="form-group">
            <label for="nationality">Nationality:<span class="mandatory-star">*</span></label>
             <select id="nationality" name="nationality" required>
                <option value="">--Select Country--</option>
                <option value="AF">Afghanistan</option>
                <option value="AL">Albania</option>
                <option value="DZ">Algeria</option>
                <option value="AD">Andorra</option>
                <option value="AO">Angola</option>
                <option value="AR">Argentina</option>
                <option value="AM">Armenia</option>
                <option value="AU">Australia</option>
                <option value="AT">Austria</option>
                <option value="AZ">Azerbaijan</option>
                <option value="BS">Bahamas</option>
                <option value="BH">Bahrain</option>
                <option value="BD">Bangladesh</option>
                <option value="BY">Belarus</option>
                <option value="BE">Belgium</option>
                <option value="BZ">Belize</option>
                <option value="BR">Brazil</option>
                <option value="CA">Canada</option>
                <option value="CN">China</option>
                <option value="FR">France</option>
                <option value="GE">Georgia</option> <option value="DE">Germany</option>
                <option value="IN">India</option>
                <option value="ID">Indonesia</option>
                <option value="IT">Italy</option>
                <option value="JP">Japan</option>
                <option value="MX">Mexico</option>
                <option value="NG">Nigeria</option>
                <option value="PK">Pakistan</option>
                <option value="RU">Russia</option>
                <option value="SA">Saudi Arabia</option>
                <option value="ZA">South Africa</option>
                <option value="KR">South Korea</option>
                <option value="ES">Spain</option>
                <option value="SE">Sweden</option>
                <option value="CH">Switzerland</option>
                <option value="TR">Turkey</option>
                <option value="UA">Ukraine</option>
                <option value="AE">United Arab Emirates</option>
                <option value="GB">United Kingdom</option>
                <option value="US">United States</option>
                <option value="VN">Vietnam</option>
                </select>
        </div>

        <div class="form-group terms-group">
             <label for="terms_agreed">
                <input type="checkbox" id="terms_agreed" name="terms_agreed" value="yes" required>
                <span class="terms-label">I certify that I am 18 years of age or older, and agree to the Binance's <a href="https://www.binance.com/en/terms" target="_blank" rel="noopener noreferrer">Terms of Use</a> and <a href="https://www.binance.com/en/privacy" target="_blank" rel="noopener noreferrer">Privacy Policy</a>.<span class="mandatory-star">*</span></span>
            </label>
        </div>

        <button type="submit">Create Account</button>
        <p id="form-status"></p>

    </form>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/23.0.10/js/intlTelInput.min.js" integrity="sha512-0PksPNPkv+sP29l44+EKq797gG0oMLyzClx8eFqF/XyqB/nU4Gz4U/T+W6fU/c8l8/Q+3nBTmF91f72QSmwHqg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="https://cdn.jsdelivr.net/npm/choices.js@9.0.1/public/assets/scripts/choices.min.js"></script>

    <script>
      // ----- Initialize intl-tel-input (for Phone Number flags/codes) -----
      const phoneInputField = document.querySelector("#phone");
      const phoneInput = window.intlTelInput(phoneInputField, {
          utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/23.0.10/js/utils.js",
          initialCountry: "auto",
          geoIpLookup: callback => {
              fetch("https://ipapi.co/json") // Simple free IP lookup
                  .then(res => res.json())
                  .then(data => callback(data.country_code))
                  .catch(() => callback("us")); // Fallback
          },
          separateDialCode: true,
          preferredCountries: ["ge", "us", "gb"], // Prioritize Georgia, US, UK
      });

      // ----- Initialize Choices.js (for Nationality flags) -----
      const nationalityElement = document.querySelector('#nationality');
      const choices = new Choices(nationalityElement, {
          searchEnabled: true, // Allow searching through countries
          itemSelectText: '', // Text to show on hover/focus of an item
          classNames: { // Optional: customize classes if needed
            // containerOuter: 'choices',
            // containerInner: 'choices__inner',
            // input: 'choices__input',
            // inputCloned: 'choices__input--cloned',
            // list: 'choices__list',
            // listItems: 'choices__list--multiple',
            // listSingle: 'choices__list--single',
            // listDropdown: 'choices__list--dropdown',
            // item: 'choices__item',
            // itemSelectable: 'choices__item--selectable',
            // itemDisabled: 'choices__item--disabled',
            // itemChoice: 'choices__item--choice',
            // placeholder: 'choices__placeholder',
            // group: 'choices__group',
            // groupHeading : 'choices__heading',
            // button: 'choices__button',
            // activeState: 'is-active',
            // focusState: 'is-focused',
            // openState: 'is-open',
            // disabledState: 'is-disabled',
            // highlightedState: 'is-highlighted',
            // selectedState: 'is-selected', // Useful for potentially styling the chosen item
            // flippedState: 'is-flipped',
            // loadingState: 'is-loading',
            // noResults: 'has-no-results',
            // noChoices: 'has-no-choices'
          },
          // --- Callback to render choices with flags ---
          callbackRenderChoice: (template, data) => {
              // data contains label, value, selected, disabled etc.
              // We use data.value which should be the 2-letter country code
              const countryCode = data.value ? data.value.toLowerCase() : '';
              const flagHtml = countryCode ? `<span class="fi fi-${countryCode}"></span>` : ''; // Get flag icon span
              // Return the custom HTML for the dropdown choice
              // Use the original template structure provided by Choices.js and insert the flag
              // This structure might change slightly between Choices.js versions, check their docs if needed.
              // A common structure might be like this:
              return template.replace(
                    /(<div.*?>)(.*)(<\/div>)/, // Find the inner content div
                    `$1${flagHtml}${data.label}$3` // Insert flag before the label
                );
          },
           // --- Optional: Callback to render the selected item with a flag ---
          // callbackRenderSelectedItem: (template, data) => {
          //      // Similar logic to render choice, but for the selected item display
          //     const countryCode = data.value ? data.value.toLowerCase() : '';
          //     const flagHtml = countryCode ? `<span class="fi fi-${countryCode}" style="margin-right: 5px;"></span>` : '';
          //     return template.replace(
          //           /(<div.*?>)(.*)(<button.*?>.*?<\/button>)?(<\/div>)/,
          //           `$1${flagHtml}${data.label}$3$4` // Insert flag, keep remove button if present
          //       );
          // }
      });


      // ----- Form submission handling script (same as before) -----
      var form = document.getElementById("contact-form");
      var status = document.getElementById("form-status");

      async function handleSubmit(event) {
          event.preventDefault();

          const termsCheckbox = document.getElementById('terms_agreed');
          if (!termsCheckbox.checked) {
              status.innerHTML = "You must agree to the terms and conditions.";
              status.className = 'error';
              const termsGroup = document.querySelector('.terms-group');
              if (termsGroup) {
                termsGroup.style.border = '1px solid red';
                setTimeout(() => { termsGroup.style.border = '1px solid #eee'; }, 3000); // Reset border
              }
              return;
          }

          const fullNumber = phoneInput.getNumber();
          let hiddenInput = form.querySelector('input[name="full_phone_number"]');
          if (!hiddenInput) {
              hiddenInput = document.createElement('input');
              hiddenInput.type = 'hidden';
              hiddenInput.name = 'full_phone_number';
              form.appendChild(hiddenInput);
          }
          hiddenInput.value = fullNumber;

          var data = new FormData(event.target);
          status.innerHTML = 'Submitting...';
          status.className = '';
          fetch(event.target.action, {
              method: form.method,
              body: data,
              headers: { 'Accept': 'application/json' }
          }).then(response => {
              if (response.ok) {
                  status.innerHTML = "Account details submitted successfully!";
                  status.className = 'success';
                  form.reset();
                  phoneInput.setCountry("ge"); // Reset phone input to Georgia (or auto/us)
                  choices.setChoiceByValue(''); // Reset Choices.js dropdown
              } else {
                  response.json().then(data => {
                      if (Object.hasOwn(data, 'errors')) {
                          status.innerHTML = data["errors"].map(error => error["message"]).join(", ");
                      } else {
                          status.innerHTML = "Oops! There was a problem submitting your form";
                      }
                      status.className = 'error';
                  }).catch(() => {
                       status.innerHTML = "Oops! There was a problem submitting your form (server error).";
                       status.className = 'error';
                  });
              }
          }).catch(error => {
              status.innerHTML = "Oops! Network error or problem submitting your form";
              status.className = 'error';
          });
      }
      form.addEventListener("submit", handleSubmit);
    </script>

</body>
</html>